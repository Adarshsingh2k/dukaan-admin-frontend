{"version":3,"file":"static/webpack/static/development/pages/index.js.a3efe6f9a6fd3599c30f.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from \"react\";\nimport Link from \"next/link\";\nimport Head from \"../components/Head\";\nimport Layout from \"../components/Layout\";\nimport CompleteOrders from \"../components/CompleteOrder\";\nimport AddUser from \"../components/AddUser\";\nimport NewPayment from \"../components/NewPayment\";\n// import \"semantic-ui-css/semantic.min.css\";\n// import axios from '../config'\nimport axios from \"axios\";\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: \"\",\n      completeTab: true,\n      incompleteTab: false,\n      userFound: false,\n      userInfo: null,\n      courseInfo: null,\n      createUser: false,\n      newpayment: false\n    };\n  }\n\n  handleChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n\n  toggleCompleteTab = () => {\n    this.setState(prevstate => ({\n      completeTab: true,\n      incompleteTab: false\n    }));\n  };\n\n  toggleIncompleteTab = () => {\n    this.setState(prevstate => ({\n      completeTab: false,\n      incompleteTab: true\n    }));\n  };\n\n  handleNewPayment = () => {\n    this.setState({\n      newpayment: true\n    });\n  };\n\n  handleSearch = async () => {\n    this.setState({\n      email: \"\",\n      completeTab: true,\n      incompleteTab: false,\n      userFound: false,\n      userInfo: {},\n      courseInfo: null,\n      createUser: false,\n      newpayment: false\n    });\n    let userData = await axios.get(\n      `http://localhost:2929/api/v2/admin/users?email=${this.state.email}`,\n      {\n        headers: {\n          \"dukaan-token\":\n            \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7ImNsaWVudE5hbWUiOiJvbmxpbmVDYiIsIm9uZWF1dGhJZCI6MTQ1OSwicHJvZHVjdElkIjoxNTYsInF1YW50aXR5IjoxfSwiaWF0IjoxNTYwMjQwNzkwfQ.x6pSdQA2bQndnnMoxSgwn6GdKiPmm82E8AE2BPIPRRQ\"\n        }\n      }\n    );\n    this.setState({\n      userInfo: userData.data[0]\n    });\n\n    console.log(userData.data[0]);\n    if (this.state.userInfo) {\n      axios\n        .get(\n          `http://localhost:2929/api/v2/admin/purchases?user_id=${\n            this.state.userInfo.id\n          }`,\n          {\n            headers: {\n              \"dukaan-token\":\n                \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7ImNsaWVudE5hbWUiOiJvbmxpbmVDYiIsIm9uZWF1dGhJZCI6MTQ1OSwicHJvZHVjdElkIjoxNTYsInF1YW50aXR5IjoxfSwiaWF0IjoxNTYwMjQwNzkwfQ.x6pSdQA2bQndnnMoxSgwn6GdKiPmm82E8AE2BPIPRRQ\"\n            }\n          }\n        )\n        .then(res => {\n          console.log(res);\n          this.setState({\n            courseInfo: res.data\n          });\n        })\n        .catch(err => {\n          console.log(err);\n          this.setState({\n            courseInfo: null\n          });\n        });\n    }\n\n    if (userData) {\n      this.setState({\n        userFound: true\n      });\n      console.log(userData.data[0]);\n    } else {\n      console.log(\"no user found\");\n    }\n  };\n\n  handleCreateUser = () => {\n    console.log(\"clicked\");\n    this.setState({\n      createUser: true\n    });\n  };\n\n  render() {\n    let orders;\n    const completeTab = this.state.completeTab;\n\n    if (\n      completeTab &&\n      this.state.userFound &&\n      this.state.courseInfo !== null &&\n      !this.state.newpayment\n    ) {\n      console.log(this.state.courseInfo);\n      orders = this.state.courseInfo.completePayments.map(coursePurchased => {\n        // console.log(coursePurchased);\n        return (\n          <CompleteOrders\n            key={coursePurchased.id}\n            image={coursePurchased.product.image_url}\n            product_name={coursePurchased.product.name}\n            status={coursePurchased.cart.transactions[0].status}\n            amount={coursePurchased.amount}\n          />\n        );\n      });\n    } else if (this.state.newpayment) {\n      orders = <NewPayment />;\n    } else if (completeTab) {\n      orders = <div>No Complete Orders Found.</div>;\n    } else {\n      orders = <div>No Incomplete Orders Found.</div>;\n    }\n\n    const Usercard = () => {\n      if (this.state.userFound && this.state.userInfo) {\n        return (\n          <div className=\" mt-4\">\n            <div className=\"row w-100\">\n              <div className=\"col-md-4 col-12\">\n                <div className=\"border-card br-20 bg-light-grey mb-5\">\n                  <h5>User Details</h5>\n                  <div\n                    style={{\n                      alignItems: \"center\"\n                    }}\n                  >\n                    <p className=\"red\">\n                      Username : {this.state.userInfo.username}\n                    </p>\n\n                    <p>\n                      Name : {this.state.userInfo.firstname}{\" \"}\n                      {this.state.userInfo.lastname}\n                    </p>\n\n                    <p>Email : {this.state.userInfo.email}</p>\n\n                    <p>Mobile : {this.state.userInfo.mobile_number}</p>\n\n                    <p>Wallet Amount : â‚¹ {this.state.userInfo.wallet_amount}</p>\n\n                    <div>\n                      <button\n                        className=\"button-solid\"\n                        onClick={this.handleNewPayment}\n                      >\n                        Make New Payment\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              {!this.state.newpayment ? (\n                <div className=\"col-md-8 col-12\">\n                  <div className=\"border-card br-20 bg-light-grey mb-5\">\n                    <div className=\"tab-nav-underline mb-5\">\n                      <div\n                        className={\n                          this.state.completeTab ? \"tab active\" : \"tab\"\n                        }\n                        onClick={this.toggleCompleteTab}\n                      >\n                        Complete Orders\n                      </div>\n                      <div\n                        className={\n                          this.state.incompleteTab ? \"tab active\" : \"tab\"\n                        }\n                        onClick={this.toggleIncompleteTab}\n                      >\n                        Incomplete Orders\n                      </div>\n                    </div>\n                    {orders}\n                  </div>\n                </div>\n              ) : (\n                <NewPayment />\n              )}\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className=\" mt-4\">\n            <div className=\"row w-100\">\n              <div className=\"col-md-4 col-12\">\n                <div className=\"border-card br-20 bg-light-grey mb-5\">\n                  <h5 style={{ textAlign: \"center\" }}>\n                    No user Found, Search Existing?{\" \"}\n                  </h5>\n                  <h5 className=\"mt-4\" style={{ textAlign: \"center\" }}>\n                    OR\n                  </h5>\n                  <div style={{ textAlign: \"center\" }}>\n                    <button\n                      className=\"button-solid p-3 mt-4\"\n                      onClick={this.handleCreateUser}\n                    >\n                      Create New User\n                    </button>\n                  </div>\n                </div>\n              </div>\n              {this.state.createUser ? <AddUser /> : \"\"}\n            </div>\n          </div>\n        );\n      }\n    };\n\n    return (\n      <div>\n        <Head title=\"Coding Blocks | Dukaan\" />\n        <Layout />\n\n        {/* Search User */}\n        <div className=\"container mt-4\">\n          <div className=\"row\">\n            <div className=\"col-md-12 col-12\">\n              <div style={{ display: \"flex\" }}>\n                <input\n                  name=\"email\"\n                  required\n                  id=\"email\"\n                  type=\"email\"\n                  className=\"input-text mb-2\"\n                  placeholder=\"Enter email\"\n                  onChange={this.handleChange}\n                />\n                <button\n                  id=\"search\"\n                  className=\"button-solid ml-4 mb-1\"\n                  style={{ fontSize: \"1.3rem\" }}\n                  onClick={this.handleSearch}\n                >\n                  Search\n                </button>\n              </div>\n            </div>\n          </div>\n          {/* Form 2  */}\n          <Usercard />\n\n          {/* Order history card */}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Home;\n"],"mappings":"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","sourceRoot":""}